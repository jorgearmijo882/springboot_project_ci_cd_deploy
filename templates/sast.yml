parameters:
  artifactName: ''
  version: ''

jobs:
- job: Release
  displayName: Publish Artifact
  pool:
    name: Default
  steps:
    - task: AzureCLI@2
      displayName: 'Publish Artifact to Azure Artifacts'
      inputs:
        azureSubscription: 'MiServiceConnection'
        scriptType: 'ps'
        scriptLocation: 'inlineScript'
        inlineScript: |
          Write-Host "Publishing artifact to Azure Artifacts..."
          az artifacts universal publish \
            --scope project \
            --organization $(System.TeamFoundationCollectionUri) \
            --project $(System.TeamProject) \
            --feed $(FeedName) \
            --name ${{ parameters.artifactName }} \
            --version ${{ parameters.version }} \
            --path $(Build.ArtifactStagingDirectory)
          
          # Limpiar contexto de cuenta
          az account clear
